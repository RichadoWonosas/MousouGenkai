<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>选择想要前往的页面</title>
  <link rel="stylesheet" href="styles.css">
  <script>
    function confirmAge() {
      const answer = confirm("本小说存在不适合青少年阅读的段落，你是否已年满15岁？");
      if (answer) {
        window.location.href = "mousou_chapter0.html";
      }
    }

    async function writeAccessTimestamp() {
      const accessToken = "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";
      const owner = "SugiharaYoki";
      const repo = "MousouGenkai";
      const path = "accessattempt.txt";

      const now = new Date();
      const timestamp = now.toISOString();

      const apiUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;

      try {
        // Fetch the current content of the file
        const response = await fetch(apiUrl, {
          headers: {
            Authorization: `Bearer ${accessToken}`,
          },
        });
        const data = await response.json();
        const currentContent = data.content;

        // Create a new commit with the updated content
        const updateData = {
          message: "Update access timestamp",
          content: btoa(unescape(encodeURIComponent(timestamp))),
          sha: data.sha,
        };

        await fetch(apiUrl, {
          method: "PUT",
          headers: {
            Authorization: `Bearer ${accessToken}`,
            "Content-Type": "application/json",
          },
          body: JSON.stringify(updateData),
        });

        // Handle the success if needed
        console.log("Access timestamp updated successfully");
      } catch (error) {
        // Handle any errors
        console.error("Error updating access timestamp:", error);
      }
    }

    window.addEventListener("DOMContentLoaded", writeAccessTimestamp);
  </script>
</head>
<body>
  <div class="image-container">
    <div class="lhalf-image">
      <a href="#" onclick="confirmAge();">
        <img src="book_cover.png" alt="点击进入『妄想限界：白夜今明』系列故事">
      </a>
    </div>
    <div class="lhalf-image">
      <a href="centergardenofsariel.html">
        <img src="azriel_cover.png" alt="点击进入『亚兹列尔的中庭花园』主页">
      </a>
    </div>
  </div>
</body>
</html>
